<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.2.0
Version: 3.4
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest (the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<!-- Head BEGIN -->
<head>
  <meta charset="utf-8">
  <title>CS SUPERVISOR</title>

  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <meta content="Metronic Shop UI description" name="description">
  <meta content="Metronic Shop UI keywords" name="keywords">
  <meta content="keenthemes" name="author">

  <meta property="og:site_name" content="-CUSTOMER VALUE-">
  <meta property="og:title" content="-CUSTOMER VALUE-">
  <meta property="og:description" content="-CUSTOMER VALUE-">
  <meta property="og:type" content="website">
  <meta property="og:image" content="-CUSTOMER VALUE-"><!-- link to image for socio -->
  <meta property="og:url" content="-CUSTOMER VALUE-">

  <link rel="shortcut icon" href="favicon.ico">

  <!-- Fonts START -->
  <link href="<?php echo base_url();?>assets/admin.css" rel="stylesheet" type="text/css">
  <!-- Fonts END -->

  <!-- Global styles START -->          
  <link href="<?php echo base_url();?>assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="<?php echo base_url();?>assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Global styles END --> 
   
  <!-- Page level plugin styles START -->
  <link href="<?php echo base_url();?>assets/global/plugins/fancybox/source/jquery.fancybox.css" rel="stylesheet">
  <!-- Page level plugin styles END -->

  <!-- BEGIN PAGE LEVEL STYLES -->
  <link rel="stylesheet" type="text/css" href="<?php echo base_url()?>assets/global/plugins/select2/select2.css">
  <link rel="stylesheet" type="text/css" href="<?php echo base_url()?>assets/global/plugins/datatables/extensions/Scroller/css/dataTables.scroller.min.css">
  <link rel="stylesheet" type="text/css" href="<?php echo base_url()?>assets/global/plugins/datatables/extensions/ColReorder/css/dataTables.colReorder.min.css">
  <link rel="stylesheet" type="text/css" href="<?php echo base_url()?>assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css">
  <!-- END PAGE LEVEL STYLES -->

  <!-- Theme styles START -->
  <link href="<?php echo base_url();?>assets/global/css/components.css" rel="stylesheet">
  <link href="<?php echo base_url();?>assets/frontend/layout/css/style.css" rel="stylesheet">
  <link href="<?php echo base_url();?>assets/frontend/pages/css/portfolio.css" rel="stylesheet">
  <link href="<?php echo base_url();?>assets/frontend/layout/css/style-responsive.css" rel="stylesheet">
  <link href="<?php echo base_url();?>assets/frontend/layout/css/themes/red.css" rel="stylesheet" id="style-color">
  <link href="<?php echo base_url();?>assets/frontend/layout/css/custom.css" rel="stylesheet">
  <!-- Theme styles END -->

  <link href="<?php echo base_url();?>assets/global/css/components-md.css" id="style_components" rel="stylesheet" type="text/css">
  <link href="<?php echo base_url();?>assets/global/css/plugins-md.css" rel="stylesheet" type="text/css">
  <link href="<?php echo base_url();?>assets/admin/layout3/css/layout.css" rel="stylesheet" type="text/css">
  <link href="<?php echo base_url();?>assets/admin/layout3/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color">
  <link href="<?php echo base_url();?>assets/admin/layout3/css/custom.css" rel="stylesheet" type="text/css">
  <link href="<?php echo base_url();?>assets/css/jquery-ui.css" rel="stylesheet">


<style type="text/css">
table.dataTable td.dataTables_empty 
{
  text-align: center;    
}

.wrapper {
    overflow: auto;
    height: 500px;
    /*width: 50%;*/

    /*border: 1px solid red;*/
}
.content 
{
    overflow-y: auto;
}


table.display tbody tr:nth-child(even):hover td
{
background-color: #ff5722; !important;
color: black;
}

  table.display tbody tr:nth-child(even):hover td
  {
  background-color: #ff5722 !important;
  color: black;
  }

  table.display tbody tr:nth-child(odd):hover td 
  {
  background-color: #ff5722 !important;
  color: black;
  }

  table.display tbody tr:nth-child(even):hover td .spn
  {
  background-color: #ff5722 !important;
  color: black;
  }

  table.display tbody tr:nth-child(odd):hover td .spn
  {
  background-color: #ff5722 !important;
  color: black;
  }


  input
{
  display: none;
}

label input[type=checkbox] ~ span 
{
  display: inline-block;
  vertical-align: middle;
  cursor: pointer;
  background: #fff;
  border: 1px solid #888;
  padding: 1px;
  height: 20px;
  width: 20px;
}

label input[type=checkbox]:checked ~ span 
{ 
  background: url('<?php echo base_url();?>image/check.png');
  background-size: 100%;
}
</style>
</head>
<!-- Head END -->

<!-- Body BEGIN -->
<body class="corporate">
    <!-- BEGIN STYLE CUSTOMIZER -->
    
    <!-- END BEGIN STYLE CUSTOMIZER --> 

    <?php
      $this->load->view('header');
    ?>

        <div class="page-container">

  <!-- END PAGE HEAD -->
  <!-- BEGIN PAGE CONTENT -->
  <div class="page-content" style="background: #ffffff;">
    <div class="container">
      <!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
     
      <!-- /.modal -->
      <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
      <!-- BEGIN PAGE BREADCRUMB -->

      <!-- END PAGE BREADCRUMB -->
      <!-- BEGIN PAGE CONTENT INNER -->
      <!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
     
      <!-- /.modal -->
      <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
      <!-- BEGIN PAGE BREADCRUMB -->

      <!-- END PAGE BREADCRUMB -->
      <!-- BEGIN PAGE CONTENT INNER -->
      <div class="row">
        <div class="col-md-12">
        <!-- BEGIN SAMPLE FORM PORTLET-->
       <div class="portlet light">
              <div class="portlet-title">
                <div class="caption">
                  <span class="caption-subject uppercase">CASHIER TRANSACTION</span>
                </div>     
              </div>
            <div class="portlet-body">
                <form id="denomination_form">
                    <table class="table table-bordered table-hover table-condensed display" id="transaction_table">
                        <thead>
                            <tr>                                                                                
                              <th>
                                 <center>EMPLOYEE NAME</center>
                              </th>
                               <th>
                                 <center>DEPARTMENT</center>
                              </th>
                              <th>
                                 <center>ACTION</center>
                              </th>                                                      
                            </tr>
                        </thead>
                    </table>
                </form>            
            </div>                        
          </div> 

        </div>  
      </div>    
      <!-- END PAGE CONTENT INNER -->
    </div>
  </div>
  <!-- END PAGE CONTENT -->
</div>



    <!-- Load javascripts at bottom, this will reduce page load time -->
    <!-- BEGIN CORE PLUGINS (REQUIRED FOR ALL PAGES) -->
    <!--[if lt IE 9]>
    <script src="<?php echo base_url();?>assets/global/plugins/respond.min.js"></script>
    <![endif]--> 
    <script src="<?php echo base_url();?>assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/src/jquery.maskMoney.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>      
    <script src="<?php echo base_url();?>assets/frontend/layout/scripts/back-to-top.js" type="text/javascript"></script>

    <script src="<?php echo base_url();?>assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
    <!-- <script src="<?php echo base_url();?>assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
    <script src="<?php echo base_url();?>assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->

    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script type="text/javascript" src="<?php echo base_url();?>assets/global/plugins/select2/select2.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url();?>assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url();?>assets/global/plugins/datatables/extensions/TableTools/js/dataTables.tableTools.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url();?>assets/global/plugins/datatables/extensions/ColReorder/js/dataTables.colReorder.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url();?>assets/global/plugins/datatables/extensions/Scroller/js/dataTables.scroller.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url();?>assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"></script>


<!-- END PAGE LEVEL PLUGINS -->

    <!-- BEGIN PAGE LEVEL JAVASCRIPTS (REQUIRED ONLY FOR CURRENT PAGE) -->
    <script src="<?php echo base_url();?>assets/global/plugins/fancybox/source/jquery.fancybox.pack.js" type="text/javascript"></script><!-- pop up -->
    <script src="<?php echo base_url();?>assets/global/plugins/jquery-mixitup/jquery.mixitup.min.js" type="text/javascript"></script>
    
    <script src="<?php echo base_url();?>assets/frontend/layout/scripts/layout.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/global/scripts/metronic.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/frontend/pages/scripts/portfolio.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>assets/admin/layout3/scripts/demo.js" type="text/javascript"></script>
    <script src="<?php echo base_url();?>js/datepicker/daterangepicker.js"></script>
    <script src="<?php echo base_url();?>assets/admin/pages/scripts/components-pickers.js"></script>


<!-- END PAGE LEVEL PLUGINS -->


    <script type="text/javascript">
        jQuery(document).ready(function() {
            Layout.init();
            Layout.initTwitter();
            Portfolio.init();
            ComponentsPickers.init();
        });
    </script>
    <!-- END PAGE LEVEL JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>


<div class="modal fade" id="breakdown_modal" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Delete Dialog</h4>
            </div>
            <div class="modal-body">
                <table class="table table-bordered table-responsive table-striped table-hover display" id="breakdown_table">
                <thead>
                <tr>
                    <th><center>EMPLOYEE NAME</center></th>
                    <th><center>TYPE</center></th>
                    <th><center>SHORT/OVER AMT.</center></th>                                                                                      
                    <th><center>DENOMINATION AMT.</center></th>                                                                                      
                    <th><center>DATE</center></th>                                                                                      
                    <th><center>EDIT</center></th>                                                                                                       
                    <th><center>DELETE</center></th>                                                                                                                              
                </tr>
                </thead>
                </table>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn default btn-sm" data-dismiss="modal">Close</button>
            <!-- <button type="button" id="btn_delete" class="btn btn-sm btn-success">Continue</button> -->
            </div>
        </div>
    <!-- /.modal-content -->
    </div>
<!-- /.modal-dialog -->
</div>

<div class="modal fade" id="delete_modal" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Delete Dialog</h4>
            </div>
            <div class="modal-body">
                You are about to delete employee data! Do you really want to continue?
            </div>
            <div class="modal-footer">
            <button type="button" class="btn default btn-sm" data-dismiss="modal">Close</button>
            <button type="button" id="btn_delete" class="btn btn-sm btn-success">Continue</button>
            </div>
        </div>
    <!-- /.modal-content -->
    </div>
<!-- /.modal-dialog -->
</div>

<div class="modal fade" id="delete_modal_success" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Success Dialog</h4>
            </div>
            <div class="modal-body">
                Employee data successfully deleted.
            </div>
            <div class="modal-footer">
            <button type="button" class="btn default btn-sm" data-dismiss="modal">Close</button>
            <!-- <button type="button" id="btn_delete" class="btn btn-sm btn-success">Continue</button> -->
            </div>
        </div>
    <!-- /.modal-content -->
    </div>
<!-- /.modal-dialog -->
</div>


<div class="modal fade" id="edit_modal" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Edit Dialog</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <form role="form" id="update_form">
                            <div class="form-body">
                                <div class="form-group col-md-12">
                                    <label>Employee Name</label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                        <i class="fa fa-user"></i>
                                        </span>
                                        <input type="text" class="form-control" placeholder="" id="emp_name_edit" name="emp_name_edit">
                                        <input type="hidden" class="form-control" placeholder="" id="emp_id" name="emp_id">
                                        <input type="hidden" class="form-control" placeholder="" id="h_id_edit" name="h_id_edit">
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label>Short/Over Amount</label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                        &#8369;
                                        </span>
                                        <input type="text" class="form-control" placeholder="" id="cs_amount_edit" name="cs_amount_edit" style="text-align: right">
                                        <input type="hidden" class="form-control" placeholder="" id="h_cs_amount_edit" name="h_cs_amount_edit" style="text-align: right">
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label>Denomination Amount</label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                        &#8369;
                                        </span>
                                        <input type="text" class="form-control" placeholder="" id="den_amount_edit" name="den_amount_edit" style="text-align: right">
                                        <input type="hidden" class="form-control" placeholder="" id="h_den_amount_edit" name="h_den_amount_edit" style="text-align: right">
                                    </div>
                                </div>  
                                <div class="form-group col-md-6">
                                    <label>Date</label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                        <i class="fa fa-calendar"></i>
                                        </span>
                                        <input type="date" class="form-control" placeholder="" id="date_shrt_edit" name="date_shrt_edit">
                                        <input type="hidden" class="form-control" placeholder="" id="h_date_shrt_edit" name="h_date_shrt_edit">
                                    </div>
                                </div> 
                                <div class="form-group col-md-6">
                                    <label>Dropdown</label>
                                    <select class="form-control" id="type_edit" name="type_edit">
                                        <option>S</option>
                                        <option>O</option>
                                        <option>PF</option>                                   
                                    </select>
                                    <input type="hidden" class="form-control" placeholder="" id="h_type_edit" name="h_type_edit">
                                </div>
                                <div class="form-group col-md-12">
                                    <label>Department & Borrowed</label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                        <i class="fa fa-tags"></i>
                                        </span>
                                        <input type="text" class="form-control borrow_edit" placeholder="" id="borrow_edit" name="borrow_edit">
                                        <input type="hidden" class="form-control" placeholder="" id="h_borrow_edit" name="h_borrow_edit">
                                        <input type="hidden" class="form-control" placeholder="" id="h_borrow_edit_org" name="h_borrow_edit_org">
                                    </div>
                                </div>                 
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn default btn-sm" data-dismiss="modal">Close</button>
            <button type="button" id="btn_update" class="btn btn-sm btn-success">Update</button>
            </div>
        </div>
    <!-- /.modal-content -->
    </div>
<!-- /.modal-dialog -->
</div>


<div class="modal fade bs-modal-sm" id="dept_modal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Borrow Dialog </h4>
                <input type="hidden" id="dept_code_hidden" class="form-control">
                <input type="hidden" id="dept_name_hidden" class="form-control">
                <input type="hidden" id="input_id_hidden" class="form-control">
            </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label class="col-md-4 control-label">Department</label>
                            <div class="col-md-8">
                            <select class="form-control" id="dept_option">                                               
                            </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">Sections</label>
                            <div class="col-md-8">
                            <select class="form-control" id="section_option">                                                                    
                            </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">Sub-section</label>
                            <div class="col-md-8">
                            <select class="form-control" id="sub_sec_option">                                                                    
                            </select>
                            </div>
                        </div>
                    </form>
                </div>
            <div class="modal-footer">
                <button type="button" class="btn default btn-sm" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-sm btn-success" id="borrow_modal_btn">Save changes</button>
            </div>
        </div>
    <!-- /.modal-content -->
    </div>
<!-- /.modal-dialog -->
</div>

<div class="modal fade" id="update_modal" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Delete Dialog</h4>
            </div>
            <div class="modal-body">
                You are about to update employee data! Do you really want to continue?
            </div>
            <div class="modal-footer">
            <button type="button" class="btn default btn-sm" data-dismiss="modal">Close</button>
            <button type="button" id="btn_update_confirm" class="btn btn-sm btn-success">Continue</button>
            </div>
        </div>
    <!-- /.modal-content -->
    </div>
<!-- /.modal-dialog -->
</div>

<div class="modal fade" id="update_success" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Success Dialog</h4>
            </div>
            <div class="modal-body">
                Employee data successfully updated.
            </div>
            <div class="modal-footer">
            <button type="button" class="btn default btn-sm" data-dismiss="modal">Close</button>
            <!-- <button type="button" id="btn_update_confirm" class="btn btn-sm btn-success">Continue</button> -->
            </div>
        </div>
    <!-- /.modal-content -->
    </div>
<!-- /.modal-dialog -->
</div>


<script type="text/javascript">

    $("#cs_transaction").addClass("active"); 
    var transaction_table;

    transaction_table = $('#transaction_table').DataTable(
    {
        'ajax':'<?php echo site_url('main_controller/transaction_table_con');?>',  
        'columnDefs': [
                        { className: "text-center", "targets": [2] }
                      ],
        "order": [[ 1, "asc" ]]
 
    });

    function trans_details(emp_id)
    {    
        $('#breakdown_modal').modal('show');
        breakdown_table = $("#breakdown_table").DataTable({destroy:true,
        'ajax': "<?php echo base_url()?>index.php/main_controller/trans_details_con/"+emp_id,
        // 'orders': [], 
        // 'dom': 'lftipr', 
        "columnDefs": [
        { className: "text-center", "targets": [1,4,5,6] },     
        { className: "text-right", "targets": [2,3] }     
        ],
        }); 
    }

    function trans_delete(id)
    {
        $('#delete_modal').modal('show'); 

        $("#btn_delete").unbind('click').bind('click', function()       
        { 
            $('#btn_delete').prop('disabled', true);   
            $.ajax({
                url: '<?php echo site_url('main_controller/trans_delete_con')?>',
                type: 'post',
                data: {id:id},
                success:function(data)
                {
                    $('#delete_modal').modal('hide');
                    $('#delete_modal_success').modal('show');
                    $('#btn_delete').prop('disabled', false); 
                    breakdown_table.ajax.reload(null, false);  
                }
            });
        });
    }

    function trans_edit(id)
    {
        $.ajax({
        url: '<?php echo site_url('main_controller/trans_edit_con')?>',
        type: 'post',
        data: {id:id},
        success:function(data)
        {   
            var data = $.parseJSON(data);

            $('#update_form')[0].reset();

            $('#emp_name_edit').val(data['emp_name']);
            $('#cs_amount_edit').val(data['amount_shrt']);
            $('#den_amount_edit').val(data['total_denomination']);
            $('#date_shrt_edit').val(data['date_shrt']);
            $('#type_edit').val(data['type']);
            $('#borrow_edit').val(data['dept']);
            $('#emp_id').val(data['emp_id']);

            $('#h_id_edit').val(id);
            $('#h_cs_amount_edit').val(data['amount_shrt']);
            $('#h_den_amount_edit').val(data['total_denomination']);
            $('#h_date_shrt_edit').val(data['date_shrt']);
            $('#h_type_edit').val(data['type']);
            $('#h_borrow_edit').val(data['code']);
            $('#h_borrow_edit_org').val(data['code']);

            $('#edit_modal').modal('show');
        }
        });
    }

    $(".borrow_edit").mouseup(function()
    {        
        var dept_code = $('#h_borrow_edit').val();

        $('#dept_option').find('option').remove().end();
        $('#section_option').find('option').remove().end();
        $('#sub_sec_option').find('option').remove().end();

        $('#dept_code_hidden').val("");
        $('#dept_name_hidden').val("");
        $('#input_id_hidden').val("");
        
        $.ajax({
            url:'<?php echo site_url('main_controller/dept_con')?>',
            type:'post',
            data:{dept_code:dept_code},
            success:function(data)
            {
                $('#dept_option').append('<option>Please select</option>');  
                var opts = $.parseJSON(data);                                    
                $.each(opts, function(i, d) 
                {      
                    $('#dept_option').append('<option value='+d.company_code+'-'+d.bunit_code+'-'+d.dept_code+'>'+d.dept_name+'</option>');
                    $('#dept_modal').modal('show');
                });
            }
        });
    });


    $('#dept_option').change(function() 
    {
         var dept_option =$( "#dept_option").val();
         var dept_option_text = $("#dept_option option:selected").text();

        $('#section_option').find('option').remove().end();
        $('#sub_sec_option').find('option').remove().end();

         $.ajax({
            url:'<?php echo site_url('main_controller/section_con')?>',
            type:'post',
            data:{dept_option:dept_option},
            success:function(data)
            {
                $('#section_option').append('<option>Please select</option>'); 

                var opts = $.parseJSON(data);                                    
                $.each(opts, function(i, d) 
                {      
                    $('#section_option').append('<option value='+d.company_code+'-'+d.bunit_code+'-'+d.dept_code+'-'+d.section_code+'>'+d.section_name+'</option>');
                });

                var input_hidden = dept_option_text.slice(0, 3);
                $('#dept_name_hidden').val(input_hidden);
                $('#dept_code_hidden').val(dept_option);
            }
         });
    });

    $('#section_option').change(function() 
    {
         var section_option =$( "#section_option" ).val();
         var section_option_text = $("#section_option option:selected").text();

         var dept_option_text = $("#dept_option option:selected").text();
         var input_hidden = dept_option_text.slice(0, 3);

         $('#sub_sec_option').find('option').remove().end();
         $('#dept_code_hidden').val("");
         $('#dept_name_hidden').val("");


         $.ajax({
            url:'<?php echo site_url('main_controller/sub_section_con')?>',
            type:'post',
            data:{section_option:section_option},
            success:function(data)
            {
                var input_hidden1 = section_option_text.slice(0, 3);
                $('#dept_name_hidden').val(input_hidden+"-"+input_hidden1);
                $('#dept_code_hidden').val(section_option);


                $('#sub_sec_option').append('<option>Please select</option>'); 

                var opts = $.parseJSON(data);                                    
                $.each(opts, function(i, d) 
                {      
                    $('#sub_sec_option').append('<option value='+d.company_code+'-'+d.bunit_code+'-'+d.dept_code+'-'+d.section_code+'-'+d.sub_section_code+'>'+d.sub_section_name+'</option>');
                });

            }
         });
    });

    $('#sub_sec_option').change(function() 
    {
    var dept_option_text = $("#dept_option option:selected").text();
    var input_hidden = dept_option_text.slice(0, 3);
    var section_option_text = $("#section_option option:selected").text();
    var input_hidden1 = section_option_text.slice(0, 3);

        $('#dept_code_hidden').val("");
        var sub_sec_option_text = $("#sub_sec_option option:selected").text();
        var sub_sec_option = $( "#sub_sec_option").val();

        var input_hidden2 = sub_sec_option_text.slice(0, 3);
        $('#dept_name_hidden').val(input_hidden+"-"+input_hidden1+"-"+input_hidden2);
        $('#dept_code_hidden').val(sub_sec_option);
    });

    $('#borrow_modal_btn').click(function()
     {
        var sub_sec_option = $( "#sub_sec_option").val();   

        var split = $('#input_id_hidden').val().split('_');  

        $('#h_borrow_edit').val("");

        $('#borrow_edit').val($('#dept_name_hidden').val());

        $('#h_borrow_edit').val($('#dept_code_hidden').val());

        $('#dept_modal').modal('hide');
     });


    $('#btn_update').click(function()
    {        
        $('#update_modal').modal('show'); 

        $("#btn_update_confirm").unbind('click').bind('click', function()       
        { 
            $('#btn_update_confirm').prop('disabled', true); 

            $.ajax({
                url:'<?php echo site_url('main_controller/cs_update_con')?>',
                type:'post',
                data:$('#update_form').serialize(),
                success:function(data)
                {
                  // alert(data);
                    $('#update_modal').modal('hide'); 
                    $('#update_form')[0].reset();
                    $('#edit_modal').modal('hide');
                    $('#btn_update_confirm').prop('disabled', false); 
                    breakdown_table.ajax.reload(null, false);  
                    $('#update_success').modal('show'); 
                }
            });
        });     
    });

</script>









